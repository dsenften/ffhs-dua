name: Documentation

on:
  push:
    branches: [ develop, main ]
    paths:
      - 'docs/**'
      - 'README.md'
      - '.github/workflows/documentation.yml'
  pull_request:
    branches: [ develop, main ]
    paths:
      - 'docs/**'
      - 'README.md'

jobs:
  docs:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: "3.13"

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install sphinx sphinx-rtd-theme

    - name: Check documentation files
      run: |
        echo "=== Checking documentation files ==="
        ls -la docs/
        echo ""
        echo "=== Checking README ==="
        head -20 README.md

    - name: Validate Markdown
      run: |
        echo "=== Validating Markdown files ==="
        for file in docs/*.md README.md; do
          if [ -f "$file" ]; then
            echo "Checking $file..."
            # Basic markdown validation
            grep -E "^#+\s" "$file" > /dev/null && echo "  ✓ Headers found" || echo "  ⚠ No headers found"
          fi
        done

    - name: Check for broken links in documentation
      run: |
        echo "=== Checking for common documentation issues ==="
        # Check for TODO in docs
        grep -r "TODO\|FIXME" docs/ || echo "No TODO/FIXME in docs"
        # Check for missing references
        echo "Documentation check completed"
